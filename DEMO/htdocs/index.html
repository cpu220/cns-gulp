<!DOCTYPE html>

<html >

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="keywords" content="">

  <link rel="stylesheet" href="../static/css/common.css" /> 
  <link rel="stylesheet" href="../static/swiper/swiper.css" />

  <link rel="stylesheet" href="../uisvr/css/index.css" />  

  <script src="../static/jQuery/jquery-1.9.1.js"></script>  
  <script src="../static/swiper/swiper.js"></script>  
  <script src="../uisvr/js/index.js"></script>


 
    <title>h5-默认页面</title>
    <style>
  html, body {
   
  height: 100%;
} 
.swiper-container {
  width: 100%;
  height: 100%;
}/*
.swiper-slide {
  text-align: center;
  font-size: 18px;
  background: #fff;        
  
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}*/

      /*.wrap {
      width: 200px;
      height: 100px;
      background: url('../uisvr/img/123.jpg') 0 0 no-repeat;
    }*/

    .demo{  }
.msg{    }
    </style>
</head>
 
<body>
        
    
    <div class="swiper-container " >
        <div class="swiper-wrapper">
            <div class="swiper-slide">
               <div id="main">
    
                   <div class="demo">
                      <canvas id="a1"></canvas>
                   </div>
                </div>
            </div>
            <div class="swiper-slide">Slide 2</div>
            <div class="swiper-slide">Slide 3</div>
            <div class="swiper-slide">Slide 4</div> 
        </div>  
    </div>
      
</body>
  <script>
function card(obj) {

  var bodyStyle = document.body.style; 
  bodyStyle.mozUserSelect = 'none';
  bodyStyle.webkitUserSelect = 'none';

   
  var canvas = document.getElementById(obj.elem);

  canvas.style.backgroundColor = 'transparent';
  canvas.style.position = 'absolute';

  var img = new Image(); 
  img.src = obj.url||"" ;

  img.addEventListener('load', function(e) {
    var cover;
    var w = obj.width||img.width,
      h = obj.height||img.height;
    var offsetX = canvas.offsetLeft,
      offsetY = canvas.offsetTop;
    var mousedown = false;

    function layer(cover) {
      cover.fillStyle = obj.cover||'gray';
      cover.fillRect(0, 0, w, h);
    }

    function eventDown(e) {
      e.preventDefault();
      mousedown = true;
    }

    function eventUp(e) {
      e.preventDefault();
      mousedown = false;
    }

    function eventMove(e) {
      e.preventDefault();
      if (mousedown) {
        if (e.changedTouches) {
          e = e.changedTouches[e.changedTouches.length - 1];
        }
        var x = (e.clientX + document.body.scrollLeft || e.pageX) - offsetX || 0,
          y = (e.clientY + document.body.scrollTop || e.pageY) - offsetY || 0;
        with(cover) {
          beginPath()
          arc(x, y, obj.point||20, 0, Math.PI * 2);
          fill();
        }
      }
    }

    canvas.width = w;
    canvas.height = h;
    canvas.style.backgroundImage = 'url(' + img.src + ')';

    cover = canvas.getContext('2d');
    cover.fillStyle = 'transparent';
    cover.fillRect(0, 0, w, h);
    layer(cover);

    cover.globalCompositeOperation = 'destination-out';

    canvas.addEventListener('touchstart', eventDown);
    canvas.addEventListener('touchend', eventUp);
    canvas.addEventListener('touchmove', eventMove);
    canvas.addEventListener('mousedown', eventDown);
    canvas.addEventListener('mouseup', eventUp);
    canvas.addEventListener('mousemove', eventMove);
  });
}

card({
  // width:200,
  // height:100,
  elem:"a1",
  url:"../uisvr/img/123.jpg",
  point:30,
  cover:"#ebebeb" 
});
  </script>
</html>
